<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Beating Heart</title>
  <style>
    body {
      margin: 0;
      background: black;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden;
    }
    canvas {
      display: block;
    }
  </style>
</head>
<body>
  <canvas id="heartCanvas"></canvas>
  <script>
    const canvas = document.getElementById("heartCanvas");
    const ctx = canvas.getContext("2d");

    // Fullscreen canvas
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    // Heart parametric equations
    function heartX(t) {
      return 15 * Math.pow(Math.sin(t), 3);
    }

    function heartY(t) {
      return (
        12 * Math.cos(t) -
        5 * Math.cos(2 * t) -
        2 * Math.cos(3 * t) -
        Math.cos(4 * t)
      );
    }

    // Generate heart points
    let points = [];
    for (let i = 0; i <= 2 * Math.PI; i += 0.002) {
      points.push([heartX(i), heartY(i)]);
    }

    let index = 0;
    let speed = 1;
    let t = 0;

    function drawHeartLine() {
      ctx.save();
      ctx.translate(canvas.width / 2, canvas.height / 2);
      ctx.scale(20, -20);

      ctx.strokeStyle = "red";
      ctx.lineWidth = 0.2;

      ctx.beginPath();
      ctx.moveTo(points[0][0], points[0][1]);

      for (let i = 1; i < index; i++) {
        ctx.lineTo(points[i][0], points[i][1]);
      }

      ctx.stroke();
      ctx.restore();

      if (index < points.length) {
        index += speed;
        speed += 0.05; // makin lama makin cepat
        requestAnimationFrame(drawHeartLine);
      } else {
        animateHeart(); // start berdegup banyak kali
      }
    }

    function animateHeart() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      t += 0.05;
      const scale = 20 * (1 + 0.2 * Math.sin(t * 2)); // degupan

      ctx.save();
      ctx.translate(canvas.width / 2, canvas.height / 2);
      ctx.scale(scale, -scale);

      ctx.strokeStyle = "red";
      ctx.lineWidth = 0.2;

      ctx.beginPath();
      ctx.moveTo(points[0][0], points[0][1]);
      for (let i = 1; i < points.length; i++) {
        ctx.lineTo(points[i][0], points[i][1]);
      }
      ctx.closePath();
      ctx.stroke();

      ctx.restore();

      requestAnimationFrame(animateHeart);
    }

    // Start
    drawHeartLine();
  </script>
</body>
</html>
